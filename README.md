- [Blog æ¶æ„ç®€ä»‹](#blog-æ¶æ„ç®€ä»‹)
- [Jekyll ç›¸å…³æ–‡æ¡£](#jekyll-ç›¸å…³æ–‡æ¡£)
- [ä¸‹è½½ & å®‰è£…ä¾èµ–](#ä¸‹è½½--å®‰è£…ä¾èµ–)
- [Jekyll å¯åŠ¨æœ¬åœ° server](#jekyll-å¯åŠ¨æœ¬åœ°-server)
- [Chirpy Theme](#chirpy-theme)
	- [Chirpy Theme ç›¸å…³æ–‡æ¡£](#chirpy-theme-ç›¸å…³æ–‡æ¡£)
	- [Chirpy Theme é›†æˆçš„æ–¹å¼](#chirpy-theme-é›†æˆçš„æ–¹å¼)
	- [Chirpy Theme è‡ªå®šä¹‰å›¾æ ‡ favicon](#chirpy-theme-è‡ªå®šä¹‰å›¾æ ‡-favicon)
	- [Chirpy Theme çš„å…¶ä»–è®¾ç½®](#chirpy-theme-çš„å…¶ä»–è®¾ç½®)
- [å†™åšå®¢ï¼švscode åŠç›¸å…³æ’ä»¶](#å†™åšå®¢vscode-åŠç›¸å…³æ’ä»¶)
	- [Jekyll Run](#jekyll-run)
	- [Markdown Preview Enhanced](#markdown-preview-enhanced)
	- [Markdown All in One](#markdown-all-in-one)
- [FAQ](#faq)
	- [ç«™ç‚¹çš„ favicon æ˜¾ç¤ºä¸å¯¹](#ç«™ç‚¹çš„-favicon-æ˜¾ç¤ºä¸å¯¹)
	- [å·²ç»ä¿®æ”¹äº†ç½‘ç«™ï¼Œä½†æ²¡ç”Ÿæ•ˆ](#å·²ç»ä¿®æ”¹äº†ç½‘ç«™ä½†æ²¡ç”Ÿæ•ˆ)
	- [æ‰§è¡Œ bundle install å¤±è´¥ï¼šhttp_parser.rb (0.6.0) å¯¼è‡´çš„é—®é¢˜](#æ‰§è¡Œ-bundle-install-å¤±è´¥http_parserrb-060-å¯¼è‡´çš„é—®é¢˜)
	- [ä¿®æ”¹ RubyGems æº](#ä¿®æ”¹-rubygems-æº)
	- [bundle ç›¸å…³è®¾ç½®](#bundle-ç›¸å…³è®¾ç½®)
	- [nokogumbo æŠ¥é”™](#nokogumbo-æŠ¥é”™)
	- [åœ¨å¤šå° Mac ä¸Šå†™ä½œæ—¶åŒæ­¥æ–‡ä»¶](#åœ¨å¤šå°-mac-ä¸Šå†™ä½œæ—¶åŒæ­¥æ–‡ä»¶)
	- [ä¸¤å° Mac ä¸Š bundler ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜](#ä¸¤å°-mac-ä¸Š-bundler-ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜)
	- [ä¸ºä»€ä¹ˆä¸ç”¨ macOS è‡ªå¸¦çš„ ruby](#ä¸ºä»€ä¹ˆä¸ç”¨-macos-è‡ªå¸¦çš„-ruby)
	- [rvm ç›¸å…³æ“ä½œ](#rvm-ç›¸å…³æ“ä½œ)
	- [gem ssl error: certificate verify failed](#gem-ssl-error-certificate-verify-failed)

# Blog æ¶æ„ç®€ä»‹

`Jekyll` + `Chirpy Theme`

# Jekyll ç›¸å…³æ–‡æ¡£

https://jekyllrb.com/

# ä¸‹è½½ & å®‰è£…ä¾èµ–

é‡è¦ï¼šå°†ä»“åº“ *clone* åˆ°**è·¯å¾„ä¸­ä¸å«ç©ºæ ¼**çš„ç›®å½•ä¸­ï¼Œä»¥è§„é¿ `http_parser.rb` **0.6.0** ç‰ˆæœ¬çš„ bugã€‚  

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ `bundle install` ã€‚

# Jekyll å¯åŠ¨æœ¬åœ° server

æ–¹æ³•ä¸€ï¼šåœ¨ `vscode` å†…ä½¿ç”¨ [Jekyll Run](https://marketplace.visualstudio.com/items?itemName=Dedsec727.jekyll-run) æ’ä»¶ä¸€é”®å¯åŠ¨ã€‚  

æ–¹æ³•äºŒï¼šåœ¨ `Terminal` å†…å¯åŠ¨ï¼š

```
bundle exec jekyll serve --drafts
```

# Chirpy Theme 

## Chirpy Theme ç›¸å…³æ–‡æ¡£

**chirpy live demo**ï¼ˆåŒ…å«ä¸€äº›ä½¿ç”¨è¯´æ˜ï¼‰ï¼šhttps://chirpy.cotes.info/  

**chirpy project**ï¼ˆåŒ…å« live demo çš„æºç ï¼‰ï¼šhttps://github.com/cotes2020/jekyll-theme-chirpy  

**startup template for Jekyll Theme Chirpy**ï¼ˆåŒ…å«æ–°å»ºç«™ç‚¹éœ€è¦çš„ç´ æï¼Œä¹Ÿå¯ç”¨æ¥ debugï¼‰ï¼šhttps://github.com/cotes2020/chirpy-starter

è¿™äº›ç«™ç‚¹ä¹Ÿä½¿ç”¨äº† Chirpy Themeï¼Œå¯å‰å¾€è§‚æ‘©ï¼š  

- https://onevcat.com/

## Chirpy Theme é›†æˆçš„æ–¹å¼

[æœ¬ç«™ç‚¹æ˜¯ä½¿ç”¨RubyGems æ–¹å¼å®‰è£…çš„ Chirpy Theme](https://github.com/cotes2020/jekyll-theme-chirpy/blob/master/docs/README.zh-CN.md#rubygems-%E5%AE%89%E8%A3%85)ã€‚   

å¦‚æœè¦å‡çº§ä¸»é¢˜ï¼Œåˆ™å» `Gemfile` ä¸­ä¿®æ”¹ç‰ˆæœ¬å·ï¼š  

```
gem "jekyll-theme-chirpy", "~> 4.0"
```

ç„¶åæ‰§è¡Œ `bundle install`ã€‚  

å¦‚æœè¦ä¸»åŠ¨è¿›è¡Œå°ç‰ˆæœ¬å‡çº§ï¼Œå¯æ‰§è¡Œï¼š  

```
bundle update jekyll-theme-chirpy
```

æŸ¥çœ‹ä¸»é¢˜ä¸­å…¶ä»–æ–‡ä»¶çš„ä¿¡æ¯ï¼š  

```
bundle info --path jekyll-theme-chirpy
```

## Chirpy Theme è‡ªå®šä¹‰å›¾æ ‡ favicon

åœ¨ç«™ç‚¹çš„ `/assets/img/favicons` ç›®å½•ä¸‹æ·»åŠ å›¾ç‰‡èµ„æºï¼Œè¯¦æƒ…è¯·å‚è€ƒæ–‡æ¡£ï¼šhttps://chirpy.cotes.info/posts/customize-the-favicon/  

## Chirpy Theme çš„å…¶ä»–è®¾ç½®

Google é˜…è¯»äººæ•°ç»Ÿè®¡åœ¨ `_config.yml` ä¸­è®¾ç½®ï¼Œç›®å‰è¿˜æœªè®¾ç½®ã€‚ 

# å†™åšå®¢ï¼švscode åŠç›¸å…³æ’ä»¶

> ç¬”è€…æœ€åˆç”¨çš„æ˜¯ MWebï¼Œå…¶ Markdown ç›¸å…³å¿«æ·é”®è¾ƒå¤šï¼Œä½†å…¶æ— æ³•æ˜¾ç¤º Jekyll ä¸­ä½¿ç”¨*ç»å¯¹è·¯å¾„*çš„å›¾ç‰‡ã€‚ 

vscode ä¸­æœ‰æœ‰è®¸å¤š Markdown å’Œ Jekyll ç›¸å…³çš„æ’ä»¶ï¼Œæå¤§åœ°æé«˜äº†å†™æ–‡ç« çš„æ•ˆç‡ã€‚  

ä¸‹é¢åˆ—ä¸¾ä¸€äº›ç¬”è€…ç›®å‰æ­£åœ¨ä½¿ç”¨çš„æ’ä»¶ã€‚  

## Jekyll Run

https://marketplace.visualstudio.com/items?itemName=Dedsec727.jekyll-run  

å¯ä»¥åœ¨ vscode å†…ä¸€é”®å¯åŠ¨ Jekyll æœåŠ¡ã€‚  

## Markdown Preview Enhanced

https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced  

è¿™ä¸ªæ’ä»¶å¯ä»¥æ˜¾ç¤º Jekyllä¸­ä½¿ç”¨*ç»å¯¹è·¯å¾„*çš„å›¾ç‰‡ã€‚   

å¿«æ·é”®ï¼š  

- é¢„è§ˆï¼š<kbd>Command</kbd> + <kbd>K</kbd> ï¼Œ<kbd>V</kbd>

## Markdown All in One

https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one

åŠŸèƒ½ï¼š  

- å¿«æ·é”®
  - åŠ ç²—ï¼š<kbd>Command</kbd> + <kbd>B</kbd>
  - æ–œä½“ï¼š<kbd>Command</kbd> + <kbd>I</kbd>
- æ·»åŠ å›¾ç‰‡æ—¶æœ‰è·¯å¾„è‡ªåŠ¨è¡¥å…¨
- é¢„è§ˆ

# FAQ

## ç«™ç‚¹çš„ favicon æ˜¾ç¤ºä¸å¯¹

å¯ä»¥å» `_site` ç›®å½•ä¸‹çœ‹çœ‹ç´ ææ˜¯å¦æ­£ç¡®ï¼Œè·¯å¾„æ˜¯ `_site/assets/img/favicons`ã€‚  

ç”Ÿæˆçš„ favicon ç´ ææ¥æºäº `/assets/img/favicons` ç›®å½•ï¼Œå¯å°†ç¼ºå¤±çš„ç´ ææ”¾å…¥è¿™ä¸ªç›®å½•ï¼Œç„¶åé‡æ–°æ„å»ºç«™ç‚¹ã€‚

## å·²ç»ä¿®æ”¹äº†ç½‘ç«™ï¼Œä½†æ²¡ç”Ÿæ•ˆ

ä¿®æ”¹äº†ç½‘ç«™çš„é…ç½®æ–‡ä»¶ã€å›¾æ ‡ï¼Œä½†åˆ·æ–°é¡µé¢åæ²¡ç”Ÿæ•ˆï¼Œå¯èƒ½æ˜¯å› ä¸ºæœ‰ç¼“å­˜ã€‚  

- å¦‚æœæ˜¯åœ¨æ¡Œé¢ç«¯ä½¿ç”¨ `Chrome`ï¼Œåˆ™æŒ‰ **cmd + Shift + R** å¼ºåˆ¶åˆ·æ–°é¡µé¢ã€‚
- å¦‚æœæ˜¯åœ¨ iPhone ä¸Šä½¿ç”¨ `Safari`ï¼Œåˆ™å¯ä»¥å» **è®¾ç½® - Safari - é«˜çº§ - ç½‘ç«™æ•°æ®** ä¸­åˆ é™¤ç›¸å…³ç«™ç‚¹çš„ç¼“å­˜ã€‚

## æ‰§è¡Œ bundle install å¤±è´¥ï¼šhttp_parser.rb (0.6.0) å¯¼è‡´çš„é—®é¢˜

![](images/GitHub/http_parser-error.png)

åŸå› ï¼šè·¯å¾„ä¸­æœ‰**ç©ºæ ¼**å¼•èµ·çš„ã€‚

å½“å‰ç«™ç‚¹æºæ–‡ä»¶çš„è·¯å¾„ä¸ºï¼š    

```
~/Library/Mobile Documents/iCloud~com~coderforart~iOS~MWeb/Documents/Huang-Libo.github.io
```

ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å°†ç›¸åº”ç›®å½•ä¸­çš„ç©ºæ ¼å»æ‰ï¼Œä½†æ˜¯è¿™æ˜¯ä¸€ä¸ª **iCloud Driver** çš„è·¯å¾„ï¼Œä¿®æ”¹å®ƒä¼šå¯¼è‡´ **iCloud Driver** æ— æ³•æ­£å¸¸ä½¿ç”¨ã€‚  

è¿™ä¸ªé—®é¢˜æ˜¯ `http_parser.rb` **0.6.0** ç‰ˆæœ¬çš„ bug å¼•èµ·çš„ï¼Œå·²ç»åœ¨å…¶ master åˆ†æ”¯ä¸Šä¿®å¤äº†ï¼Œä½†æœªæ‰“ tag å‘å¸ƒæ–°ç‰ˆæœ¬ã€‚    

è§£å†³æ–¹æ¡ˆï¼š  

åœ¨ `Gemfile` ä¸­æ·»åŠ ï¼š  

```ruby
gem 'http_parser.rb', git: "git@github.com:tmm1/http_parser.rb.git"
```

å‚è€ƒè¿æ¥ï¼š  

- https://github.com/tmm1/http_parser.rb/issues/47#issuecomment-544196403

**è¡¥å……è¯´æ˜**ï¼š  

è¿™ä¸ªæ”¹åŠ¨åªèƒ½åœ¨æœ¬åœ° `bundle install` æ—¶ä½¿ç”¨ï¼Œä¸è¦æäº¤åˆ° GitHubï¼Œå¦åˆ™ä¼šæ„å»ºå¤±è´¥ï¼ˆå¯èƒ½æ˜¯ä¸æ”¯æŒè¿™ç§é›†æˆæ–¹å¼ï¼‰ï¼š  

![](images/GitHub/http_parser-github-runner-error.png) 

## ä¿®æ”¹ RubyGems æº

å¦‚æœå½“å‰ç½‘ç»œè¿é»˜è®¤æºæ¯”è¾ƒæ…¢çš„è¯ï¼Œå¯ä»¥è€ƒè™‘åˆ‡æ¢ä¸ºå›½å†…æºã€‚

- Ruby China æºï¼ˆæ¨èï¼‰ï¼šhttps://gems.ruby-china.com/
- æ¸…åå¤§å­¦æºï¼šhttps://mirrors.tuna.tsinghua.edu.cn/help/rubygems/

ç›¸å…³é…ç½®æ–‡ä»¶ï¼š  

- `~/.gemrc`ï¼šRubyGems çš„é…ç½®
- `~/.bundle/config`ï¼šbundler çš„é…ç½®ï¼Œå¯æŸ¥çœ‹å…¶é•œåƒè®¾ç½®

æ³¨æ„ï¼šåˆ‡æ¢äº† RubyGems é•œåƒä¹‹åï¼Œbundler é•œåƒä¹Ÿè¦å•ç‹¬é…ç½®ã€‚åˆ‡æ¢å›é»˜è®¤æºæ—¶ï¼Œè®°å¾—å» `.bundle/config` ä¸­æŠŠé•œåƒçš„é…ç½®åˆ æ‰ã€‚  

é…ç½® bundler é•œåƒçš„è¯­æ³•è§„åˆ™ï¼š  

```
bundle config mirror.https://rubygems.org https://<rubygems-mirror.org>

```

bundler é•œåƒé…ç½®çš„å®˜æ–¹æ–‡æ¡£ï¼š http://bundler.io/v1.16/man/bundle-config.1.html#MIRRORS-OF-GEM-SOURCES  

## bundle ç›¸å…³è®¾ç½®

å¦‚æœ `bundle install` æ—¶ä¸æƒ³ä½¿ç”¨ `sudo`ï¼Œå¯æŒ‡å®š **local path**ï¼š  

```
bundle config set --local path 'vendor/bundle'
```

ç„¶åå†æ‰§è¡Œ `bundle install`ã€‚  

## nokogumbo æŠ¥é”™

æ‰§è¡Œ `bundle install` æ—¶ï¼Œ`nokogumbo` æŠ¥é”™ï¼š  

```
An error occurred while installing nokogumbo (2.0.5), and Bundler cannot continue.
Make sure that `gem install nokogumbo -v '2.0.5' --source 'https://rubygems.org/'` succeeds
before bundling.

In Gemfile:
  html-proofer was resolved to 3.19.1, which depends on
    nokogumbo
```

æŒ‰ç…§æç¤ºæ‰§è¡Œ `gem install nokogumbo -v '2.0.5' --source 'https://rubygems.org/` è¿˜æ˜¯ä¸è¡Œã€‚  

è§£å†³æ–¹æ³•ï¼šæŠŠ `vendor/bundle` ç›®å½•åˆ é™¤ï¼Œå†æ‰§è¡Œ `bundle install` å°±å¯ä»¥äº†ã€‚  

## åœ¨å¤šå° Mac ä¸Šå†™ä½œæ—¶åŒæ­¥æ–‡ä»¶

åœºæ™¯ï¼šåœ¨å…¬å¸å’Œå®¶é‡Œå„æœ‰ä¸€å° *Mac*ï¼Œåœ¨æœª *commit* å‰ï¼Œä¿®æ”¹çš„å†…å®¹éœ€è¦åœ¨ä¸¤å°è®¾å¤‡ä¸ŠåŒæ­¥ã€‚  

æœ€å¥½ä½¿ç”¨ *Dropbox* ï¼Œ*iCloud Driver* è¿˜æ˜¯ä¸å¤ªé è°±ã€‚ç‰¹åˆ«æ˜¯å°æ–‡ä»¶å¾ˆå¤šçš„æ—¶å€™ï¼Œ*Dropbox* çš„å¯ç”¨æ€§ã€ç¨³å®šæ€§éƒ½æ›´å¥½ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°å•ä¸ªæ–‡ä»¶çš„åŒæ­¥çŠ¶æ€ã€‚  

## ä¸¤å° Mac ä¸Š bundler ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜

> å®¶é‡Œå’Œå…¬å¸çš„ Mac æ˜¯é€šè¿‡ Dropbox åŒæ­¥ç¬”è®°çš„ã€‚

å‰ä¸€å¤©æ™šä¸Šåœ¨å®¶é‡Œçš„ Mac ä¸Šå†™äº†ç‚¹ç¬”è®°ï¼Œç¬¬äºŒå¤©ç”¨å…¬å¸çš„ Mac ç»§ç»­å†™ï¼Œæ‰§è¡Œ `bundle exec jekyll server` æ—¶æŠ¥é”™ï¼š  

```
Traceback (most recent call last):
	17: from $HOME/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:22:in `<main>'
	16: from $HOME/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:22:in `eval'
	15: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/bin/jekyll:23:in `<main>'
	14: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/bin/jekyll:23:in `load'
	13: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/exe/jekyll:8:in `<top (required)>'
	12: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/exe/jekyll:8:in `require'
	11: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/lib/jekyll.rb:195:in `<top (required)>'
	10: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/lib/jekyll.rb:195:in `require'
	 9: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll-sass-converter.rb:4:in `<top (required)>'
	 8: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll-sass-converter.rb:4:in `require'
	 7: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll/converters/scss.rb:3:in `<top (required)>'
	 6: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll/converters/scss.rb:3:in `require'
	 5: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc.rb:31:in `<top (required)>'
	 4: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc.rb:31:in `require_relative'
	 3: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc/native.rb:3:in `<top (required)>'
	 2: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc/native.rb:3:in `require'
	 1: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi.rb:3:in `<top (required)>'
$HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi.rb:3:in `require': cannot load such file -- 2.6/ffi_c (LoadError)
	18: from $HOME/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:22:in `<main>'
	17: from $HOME/.rvm/gems/ruby-2.6.5/bin/ruby_executable_hooks:22:in `eval'
	16: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/bin/jekyll:23:in `<main>'
	15: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/bin/jekyll:23:in `load'
	14: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/exe/jekyll:8:in `<top (required)>'
	13: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/exe/jekyll:8:in `require'
	12: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/lib/jekyll.rb:195:in `<top (required)>'
	11: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-4.2.0/lib/jekyll.rb:195:in `require'
	10: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll-sass-converter.rb:4:in `<top (required)>'
	 9: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll-sass-converter.rb:4:in `require'
	 8: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll/converters/scss.rb:3:in `<top (required)>'
	 7: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/jekyll-sass-converter-2.1.0/lib/jekyll/converters/scss.rb:3:in `require'
	 6: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc.rb:31:in `<top (required)>'
	 5: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc.rb:31:in `require_relative'
	 4: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc/native.rb:3:in `<top (required)>'
	 3: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/sassc-2.4.0/lib/sassc/native.rb:3:in `require'
	 2: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi.rb:2:in `<top (required)>'
	 1: from $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi.rb:5:in `rescue in <top (required)>'
$HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi.rb:5:in `require': incompatible library version - $HOME/$BLOG/vendor/bundle/ruby/2.6.0/gems/ffi-1.15.1/lib/ffi_c.bundle (LoadError)
```

ä»æŠ¥é”™å‰ä¸¤è¡Œçš„ `$HOME/.rvm/gems/ruby-2.6.5` ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“å‰ *Mac* ä½¿ç”¨çš„ ruby ç‰ˆæœ¬æ˜¯ `2.6.5` ã€‚  

è€Œåé¢çš„ `$BLOG/vendor/bundle/ruby/2.6.0` **ä¸æ˜¯**è¯´ `bundle install` æ—¶ä½¿ç”¨çš„ *ruby* ç‰ˆæœ¬æ˜¯ `2.6.0` ï¼Œæ‰€æœ‰ `2.6.x` å°ç‰ˆæœ¬åœ¨è¿™ä¸ªç›®å½•ä¸Šéƒ½ä¼šæ˜¾ç¤ºæˆ `2.6.0` ã€‚  

ä¸è¿‡æœ€å¥½è¿˜æ˜¯ä¿æŒä¸¤å° *Mac* ä¸Šçš„ *ruby* ç‰ˆæœ¬ä¿æŒä¸€è‡´ã€‚  

å†æ‰§è¡Œ `bundle install` ï¼Œå‡ºç°äº† **Warning** ï¼š  

```
â¯ bundle install
Warning: the running version of Bundler (2.1.4) is older than the version that created the lockfile (2.2.17). We suggest you to upgrade to the version that created the lockfile by running `gem install bundler:2.2.17`.
```

åŸå› æ˜¯ `Gemfile.lock` ä¸­æŒ‡å®šçš„ *bundle* ç‰ˆæœ¬æ˜¯ `2.2.17` ï¼Œè€Œå½“å‰ Mac ä½¿ç”¨çš„ ç‰ˆæœ¬æ˜¯ `2.1.4` ã€‚åœ¨ `Gemfile.lock` æœ€ä¸‹é¢æœ‰ *bundler* ç›¸å…³ä¿¡æ¯ï¼š  

```
BUNDLED WITH
   2.2.17
```

å…ˆæ‰§è¡Œ `gem install bundler:2.2.17` åœ¨å½“å‰ *Mac* ä¸Šå®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ *bundler* ã€‚  

åˆ é™¤ `vendor/bundle` ç›®å½•ï¼Œå†æ‰§è¡Œ `bundle install` ï¼Œå®Œæˆåï¼Œæ‰§è¡Œ `bundle exec jekyll server` ï¼Œå°±å¯ä»¥äº†ã€‚  

**ç»“è®ºï¼šä¸¤å°ç”µè„‘çš„ ruby ç‰ˆæœ¬ã€bundler ç‰ˆæœ¬æœ€å¥½ä¿æŒä¸€è‡´ã€‚**

## ä¸ºä»€ä¹ˆä¸ç”¨ macOS è‡ªå¸¦çš„ ruby

ç³»ç»Ÿ *ruby* çš„ä½ç½®æ˜¯ `/usr/bin/ruby` ï¼›ç³»ç»Ÿ *gem* çš„ä½ç½®æ˜¯ `/Library/Ruby/Gems/`ï¼Œå°†è½¯ä»¶å®‰è£…åˆ°ç³»ç»Ÿ *gem* çš„ä½ç½®æ—¶éœ€è¦ `sudo` æƒé™ã€‚  

å¦å¤–ï¼Œåœ¨ä¸¤å°ç³»ç»Ÿç‰ˆæœ¬ä¸ä¸€æ ·çš„ *Mac* ä¸Šç”¨äº‘ç›˜åŒæ­¥ *ruby* é¡¹ç›®æ—¶ï¼Œç”±äºä¸åŒç³»ç»Ÿç‰ˆæœ¬ä¸‹çš„ *ruby* ç‰ˆæœ¬å¯èƒ½ä¸åŒï¼Œ*gemset* ç¯å¢ƒä¹Ÿéš¾ä»¥ä¿æŒä¸€è‡´ï¼Œä¼šå¯¼è‡´è¿è¡Œçš„æ—¶å€™æŠ¥é”™ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºå½“å‰ *Mac* ç¼ºå°‘ä¾èµ–çš„ *gem* åŒ…ã€‚  

æœ€å¥½ç”¨ [rvm](https://rvm.io/) æˆ– [rbenv](http://rbenv.org/) æ¥å®‰è£…å’Œç®¡ç†ä¸åŒç‰ˆæœ¬çš„ *ruby* ï¼Œå¯å‡å°‘ `sudo` ç›¸å…³çš„æ“ä½œï¼Œä¹Ÿèƒ½ä¿éšœå¤šå° *Mac* ä¸Šçš„ *ruby* ç¯å¢ƒé«˜åº¦ä¸€è‡´ã€‚  

*rvm* å’Œ *rbenv* çš„åŒºåˆ«ï¼š

- *rvm* æ˜¯è€ç‰Œçš„ *ruby* ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œä¸åŒç‰ˆæœ¬ä¹‹é—´ä½¿ç”¨ç‹¬ç«‹çš„çš„ gemset ï¼Œè¿½æ±‚é«˜åº¦è‡ªåŠ¨åŒ–ã€å…¨é¢ï¼Œé€‚åˆæ–°æ‰‹ã€‚
- *rbenv* æ˜¯åèµ·ä¹‹ç§€ï¼Œ*GitHub stars* å·²ç»è¶…è¿‡äº† *rvm* ï¼›å°è€Œç®€æ´ï¼Œè¿è¡Œæ•ˆç‡æ›´é«˜ï¼Œä½†è‡ªåŠ¨åŒ–ç¨‹åº¦æ¯” *rvm* ä½ï¼Œé€‚åˆæœ‰ç»éªŒçš„ã€æœ‰å®šåˆ¶åŒ–éœ€æ±‚çš„è€æ‰‹ã€‚

å¦å¤–ï¼Œæ® *RubyChina* è®ºå›çš„[ç½‘å‹åé¦ˆ](https://ruby-china.org/topics/10275 )ï¼Œ*rvm* çš„ bug ç•¥å¤šï¼Œå½“ *ruby* ç¯å¢ƒå‡ºé—®é¢˜æ—¶ï¼Œå¾ˆéš¾åˆ¤æ–­åˆ°åº•æ˜¯ç”¨æˆ·è‡ªå·±ç¯å¢ƒé…ç½®çš„é—®é¢˜è¿˜æ˜¯ *rvm* è‡ªèº«çš„ bugã€‚  

å¦‚æœé‡åˆ°å¥‡æ€ªçš„ bug ï¼Œå¯ä»¥å°è¯•é‡è£… *rvm* ã€‚  

ç¬”è€…å°±åœ¨å®¶é‡Œçš„ *Mac* ä¸Šé‡åˆ°è¿‡ `gem sources --add` å¤±è´¥çš„é—®é¢˜ï¼š

```
Unable to download data from https://rubygems.org/ - no such name (https://rubygems.org/specs.4.8.gz
```

æŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œç½‘å‹åˆ—ä¸¾äº†å¤šç§å¯èƒ½ï¼š

- ipv6 è¿æ¥å¤±è´¥ã€‚è¿™ä¸ªç½‘ç«™ä¼šä¼˜å…ˆè¿æ¥ ipv6 ï¼Œå¦‚æœè¶…æ—¶äº†ï¼Œä¸ä¼šå†å»å°è¯• ipv4 è¿æ¥ï¼Œå¥½åƒæ˜¯ä¸€ä¸ª bug ã€‚
  - ä½†ç¬”è€…é‡åˆ°çš„æƒ…å†µæ˜¯æ‰§è¡Œå‘½ä»¤åç«‹å³å¤±è´¥äº†ï¼Œçœ‹ä¸Šå»ä¸æ˜¯è¿æ¥è¶…æ—¶äº†ã€‚
  - å¦å¤–ç¬”è€…å…³é—­äº† ipv6 è¿æ¥åï¼Œä¹Ÿè¿˜æ˜¯ä¸å¥æ•ˆã€‚
- rubygems.org è¢«å¢™äº†ï¼Œè¦ä½¿ç”¨ VPN ä»£ç†ã€‚
  - ç¬”è€…ä½¿ç”¨ proxychain è¿ä»£ç†æœåŠ¡å™¨ï¼Œä¸å¥æ•ˆã€‚
  - æ¢ RubyChina çš„å›½å†…é•œåƒæºï¼Œä¹ŸæŠ¥åŒæ ·çš„é”™è¯¯ã€‚

æœ€åé‡è£… rvm åï¼Œåˆä¸çŸ¥é“æ”¹äº†ä»€ä¹ˆï¼Œå°±å¥½äº†ã€‚æƒŠä¸æƒŠå–œã€‚  

## rvm ç›¸å…³æ“ä½œ

å®‰è£… rvm ï¼š  

```
\curl -sSL https://get.rvm.io | bash -s stable --ruby
```

æ›´æ–° rvm ï¼š  

```
rvm get stable
```

å®‰è£…å®Œæˆåï¼Œåœ¨å½“å‰ç»ˆç«¯æ‰§è¡Œ `rvm reload` ï¼Œæˆ–æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯ã€‚  

æŸ¥çœ‹æœ¬æœºå·²å®‰è£…çš„ç‰ˆæœ¬ï¼š  

```
rvm list
```

æŸ¥çœ‹äº‘ç«¯æ‰€æœ‰çš„ç‰ˆæœ¬ï¼š  

```
rvm list know
```

å®‰è£…æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œå¦‚æœå­˜åœ¨äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼Œåˆ™ä¼šç›´æ¥å®‰è£…äºŒè¿›åˆ¶ç‰ˆæœ¬ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ä¼šä¸‹è½½æºç ï¼Œæœ¬æœºç¼–è¯‘å®‰è£…ï¼š  

```
rvm install 2.7.3
```

æŒ‡å®šåªä»æºç ç¼–è¯‘å®‰è£…ï¼š  

```
# å¿½ç•¥äºŒè¿›åˆ¶ï¼Œå¦åˆ™å¯èƒ½ä¼šè¯·æ±‚ rubies.travis-ci.org
rvm install 2.7.3 --disable-binary
```

åˆ‡æ¢ç‰ˆæœ¬ï¼š  

```
rvm use 2.7.2
```

åˆ‡æ¢ç‰ˆæœ¬å¹¶è®¾ç½®æˆ defaultï¼š  

```
rvm use 2.7.2 --default
```

ä½¿ç”¨ç³»ç»Ÿ ruby ï¼š

```
rvm use system --default
```

å‚è€ƒï¼šhttp://homeway.github.io/tutorial/rvm.html

## gem ssl error: certificate verify failed

ä¹‹å‰ä¸ºäº†å°è¯•è§£å†³ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼Œä¿®æ”¹äº† *host* ï¼Œç„¶ååæ¥å¿˜äº†æ”¹å›æ¥ï¼Œå¯¼è‡´äº† *ssl error* ã€‚åœ¨ `/etc/hosts` ä¸­æŠŠç›¸å…³é¡¹ç§»é™¤å°±å¯ä»¥äº†ï¼š    

```
151.101.192.70  rubygems.org
```

ä¸‹é¢è®°å½•ä¸€ä¸‹æ’é”™çš„ç»å†ğŸ“ã€‚

æ‰§è¡Œ `gem update --system` æŠ¥é”™ï¼š  

```
~
â¯ 
Updating rubygems-update
ERROR:  SSL verification error at depth 0: ok (0)
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (certificate rejected) (https://rubygems.org/api/v1/dependencies?gems=rubygems-update)
```

æŸ¥é˜…ç›¸å…³æ–‡æ¡£ï¼š    

- https://guides.rubygems.org/ssl-certificate-update/
- https://bundler.io/v2.0/guides/rubygems_tls_ssl_troubleshooting_guide.html#troubleshooting-certificate-errors

æœ‰ä¸ªè„šæœ¬ï¼Œå¯æ‰§è¡Œæ£€æµ‹è¿æ¥å’Œè¯ä¹¦æœ‰æ•ˆæ€§ï¼š  

```
curl -Lks 'https://git.io/rg-ssl' | ruby
```

è¾“å‡ºï¼š  

```
Here's your Ruby and OpenSSL environment:

Ruby:           2.6.3p62 (2019-04-16 revision 67580) [universal.x86_64-darwin20]
RubyGems:       3.0.3
Bundler:        2.2.17
Compiled with:  LibreSSL 2.8.3
Loaded version: LibreSSL 2.8.3
SSL_CERT_FILE:  /private/etc/ssl/cert.pem
SSL_CERT_DIR:   /private/etc/ssl/certs

With that out of the way, let's see if you can connect to rubygems.org...

Bundler connection to rubygems.org:       failed  âŒ  (certificate verification)
ERROR:  SSL verification error at depth 0: ok (0)
RubyGems connection to rubygems.org:      failed  âŒ  (certificate verification)
Ruby net/http connection to rubygems.org: failed  âŒ

Unfortunately, this Ruby can't connect to rubygems.org. ğŸ˜¡
Your Ruby can't connect to rubygems.org because you are missing the certificate files OpenSSL needs to verify you are connecting to the genuine rubygems.org servers.
```

è¿æ¥å…¨éƒ¨å¤±è´¥ï¼Œå¹¶æç¤ºæ˜¯åœ¨â€œè¯ä¹¦è®¤è¯â€é˜¶æ®µå‡ºçš„é—®é¢˜ã€‚çªç„¶æƒ³åˆ°äº†ä¹‹å‰æ”¹è¿‡ host ï¼Œæ¢å¤ host æ–‡ä»¶ä¹‹åï¼Œå†æ‰§è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå°±æç¤ºè¿æ¥å…¨éƒ¨æˆåŠŸäº†ï¼š  

```
Here's your Ruby and OpenSSL environment:

Ruby:           2.7.2p137 (2020-10-01 revision 5445e0435260b449decf2ac16f9d09bae3cafe72) [x86_64-darwin20]
RubyGems:       3.2.19
Bundler:        2.2.19
Compiled with:  OpenSSL 1.1.1k  25 Mar 2021
Loaded version: OpenSSL 1.1.1k  25 Mar 2021
SSL_CERT_FILE:  /usr/local/etc/openssl@1.1/cert.pem
SSL_CERT_DIR:   /usr/local/etc/openssl@1.1/certs

With that out of the way, let's see if you can connect to rubygems.org...

Bundler connection to rubygems.org:       success âœ…
RubyGems connection to rubygems.org:      success âœ…
Ruby net/http connection to rubygems.org: success âœ…

Hooray! This Ruby can connect to rubygems.org. You are all set to use Bundler and RubyGems. ğŸ‘Œ
```
